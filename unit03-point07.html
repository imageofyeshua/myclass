<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Past & Present Perfect - Point 7 Exercise</title>
    <style>
        :root {
            --primary: #4a90e2;
            --warning: #d2691e;
            --success: #2ecc71;
            --danger: #e74c3c;
            --gray: #f4f4f9;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--gray);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .quiz-container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 700px;
            text-align: center;
        }

        /* Result Bar Styling */
        .result-bar {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }
        .status-box {
            width: 25px;
            height: 25px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        .correct { background-color: var(--success); color: white; border-color: var(--success); }
        .incorrect { background-color: var(--danger); color: white; border-color: var(--danger); }

        #question-text {
            font-size: 1.2rem;
            margin: 30px 0;
            min-height: 60px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .answer-group {
            display: flex;
            gap: 15px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: opacity 0.2s;
            font-weight: 600;
        }

        button:disabled { opacity: 0.3; cursor: not-allowed; }

        .btn-nav { background-color: #ddd; color: #333; }
        .btn-left { background-color: var(--primary); color: white; }
        .btn-right { background-color: var(--warning); color: white; }
        
        #score-display {
            display: none;
            font-size: 1.5rem;
            color: var(--primary);
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="quiz-container">
    <div class="result-bar" id="result-bar"></div>

    <div id="quiz-box">
        <h3 id="question-number">Question 1</h3>
        <p id="question-text">Loading question...</p>

        <div class="controls">
            <button id="prev-btn" class="btn-nav">Previous</button>
            
            <div class="answer-group">
                <button id="left-btn" class="btn-left">Left</button>
                <button id="right-btn" class="btn-right">Right</button>
            </div>

            <button id="next-btn" class="btn-nav">Next</button>
        </div>
    </div>

    <div id="score-display">
        <h2>Unit 03 - Point 07 Complete!</h2>
        <p>Total Score: <span id="final-score">0</span> / 10</p>
        <button onclick="location.reload()">Restart</button>
    </div>
</div>

<script>
    const questions = [
        { q: "When he was eleven, he <strong>wanted / has wanted</strong> to take Japanese lessons.", a: "Left" },
        { q: "I <strong>enjoyed / have enjoyed</strong> swimming since I joined a sports program several years ago.", a: "Right" },
        { q: "Doctors Without Borders, also known as Médecins Sans Frontières or MSF, <strong>was / has been</strong> founded in 1971 by a small group of French doctors.", a: "Left" },
        { q: "Though no one expected that our team would win the game, we <strong>advanced / have advanced</strong> to the finals last night.", a: "Left" },
        { q: "I had to fly to London on business the other week. I usually have a hard time sleeping on airplanes, so I <strong>took / have taken</strong> a sleeping pill just before takeoff. ", a: "Left" },
        { q: "Once the sun goes down, Louise transforms herself into a vampire. She has even gotten some vampire teeth. For ten years now, she <strong>collected / has collected</strong> a houseful of horror movie videos, skulls, and bats. ", a: "Right" },
        { q: "There <strong>was / has been</strong> a dramatic decrease in the number of traffic accidents since last year. It must be the effect of a clampdown on drinking and driving.", a: "Right" },
        { q: "Most scientists now believe that our ancestors ― the earliest Homo Sapiens ― <strong>originated / have originated</strong> in Africa around 200,000 years ago.", a: "Left" },
        { q: "The number of remote workers <strong>increased / has increased</strong> since the pandemic started, with traditional workplaces undergoing significant changes.", a: "Right" },
        { q: "China’s frequent times of unity have a long history. The most productive areas of modern China were politically joined for the first time in 221 BC, and <strong>remained / has remained</strong> so for most of the time since then. It has had only a single writing system from the beginning, a single principal language for a long time, and solid cultural unity for two thousand years", a: "Right" },
    ];

    let currentIndex = 0;
    let userAnswers = new Array(10).fill(null); // Stores true, false, or null

    const resBar = document.getElementById('result-bar');
    const qText = document.getElementById('question-text');
    const qNum = document.getElementById('question-number');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    // Initialize Status Bar
    function initStatusBar() {
        resBar.innerHTML = '';
        questions.forEach((_, i) => {
            const div = document.createElement('div');
            div.className = 'status-box';
            div.id = `status-${i}`;
            div.innerText = i + 1;
            resBar.appendChild(div);
        });
    }

    function updateUI() {
        const currentQ = questions[currentIndex];
        qNum.innerText = `Question ${currentIndex + 1}`;
        qText.innerHTML = currentQ.q;

        // Button States
        prevBtn.disabled = currentIndex === 0;
        nextBtn.innerText = currentIndex === questions.length - 1 ? "Finish" : "Next";

        // Update Status Bar Visuals
        questions.forEach((_, i) => {
            const box = document.getElementById(`status-${i}`);
            if (userAnswers[i] === null) {
                box.className = 'status-box';
                box.innerText = i + 1;
            } else {
                const isCorrect = userAnswers[i] === questions[i].a;
                box.className = isCorrect ? 'status-box correct' : 'status-box incorrect';
                box.innerText = isCorrect ? 'O' : 'X';
            }
        });
    }

    function handleAnswer(choice) {
        console.log(choice)
        userAnswers[currentIndex] = choice;
        updateUI();
    }

    function showResults() {
        document.getElementById('quiz-box').style.display = 'none';
        const scoreDisplay = document.getElementById('score-display');
        scoreDisplay.style.display = 'block';

        const score = userAnswers.reduce((total, ans, i) => {
            return (ans === questions[i].a) ? total + 1 : total;
        }, 0);

        document.getElementById('final-score').innerText = score;
    }

    // Event Listeners
    document.getElementById('left-btn').addEventListener('click', () => handleAnswer("Left"));
    document.getElementById('right-btn').addEventListener('click', () => handleAnswer("Right"));
    
    prevBtn.addEventListener('click', () => {
        if (currentIndex > 0) {
            currentIndex--;
            updateUI();
        }
    });

    nextBtn.addEventListener('click', () => {
        if (currentIndex < questions.length - 1) {
            currentIndex++;
            updateUI();
        } else {
            showResults();
        }
    });

    // Start
    initStatusBar();
    updateUI();
</script>

</body>
</html>